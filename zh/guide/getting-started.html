<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>快速上手 | Easyweb</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/easyweb/images/logo.png">
    <link rel="manifest" href="/easyweb/manifest.json">
    <link rel="apple-touch-icon" href="/easyweb/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/easyweb/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="使用中台快速构建web应用程序">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/easyweb/assets/css/0.styles.7d14fee4.css" as="style"><link rel="preload" href="/easyweb/assets/js/app.35a2d17f.js" as="script"><link rel="preload" href="/easyweb/assets/js/5.e4161a44.js" as="script"><link rel="preload" href="/easyweb/assets/js/7.a0b797f9.js" as="script"><link rel="preload" href="/easyweb/assets/js/8.9a193c71.js" as="script"><link rel="prefetch" href="/easyweb/assets/js/10.ff210ff0.js"><link rel="prefetch" href="/easyweb/assets/js/100.0558cbe8.js"><link rel="prefetch" href="/easyweb/assets/js/101.dbc0ca7f.js"><link rel="prefetch" href="/easyweb/assets/js/102.b518c334.js"><link rel="prefetch" href="/easyweb/assets/js/11.1a4bfc9a.js"><link rel="prefetch" href="/easyweb/assets/js/12.27bfcf0b.js"><link rel="prefetch" href="/easyweb/assets/js/13.1e038166.js"><link rel="prefetch" href="/easyweb/assets/js/14.ab42cc32.js"><link rel="prefetch" href="/easyweb/assets/js/15.35d89ba8.js"><link rel="prefetch" href="/easyweb/assets/js/16.a3c8bba3.js"><link rel="prefetch" href="/easyweb/assets/js/17.f9be130d.js"><link rel="prefetch" href="/easyweb/assets/js/18.88297925.js"><link rel="prefetch" href="/easyweb/assets/js/19.5dd71979.js"><link rel="prefetch" href="/easyweb/assets/js/20.c21b5d57.js"><link rel="prefetch" href="/easyweb/assets/js/21.9c8e800c.js"><link rel="prefetch" href="/easyweb/assets/js/22.6110ecd1.js"><link rel="prefetch" href="/easyweb/assets/js/23.fd09e11c.js"><link rel="prefetch" href="/easyweb/assets/js/24.1f4613b5.js"><link rel="prefetch" href="/easyweb/assets/js/25.18af3d39.js"><link rel="prefetch" href="/easyweb/assets/js/26.c8f3eea7.js"><link rel="prefetch" href="/easyweb/assets/js/27.fd548dc2.js"><link rel="prefetch" href="/easyweb/assets/js/28.15037b8f.js"><link rel="prefetch" href="/easyweb/assets/js/29.f7333a62.js"><link rel="prefetch" href="/easyweb/assets/js/30.0748022e.js"><link rel="prefetch" href="/easyweb/assets/js/31.1902535c.js"><link rel="prefetch" href="/easyweb/assets/js/32.6c4179a5.js"><link rel="prefetch" href="/easyweb/assets/js/33.b6d8f44b.js"><link rel="prefetch" href="/easyweb/assets/js/34.024dc6c0.js"><link rel="prefetch" href="/easyweb/assets/js/35.f58e8d50.js"><link rel="prefetch" href="/easyweb/assets/js/36.143868f9.js"><link rel="prefetch" href="/easyweb/assets/js/37.7a548cdf.js"><link rel="prefetch" href="/easyweb/assets/js/38.9ea156c1.js"><link rel="prefetch" href="/easyweb/assets/js/39.23845e0b.js"><link rel="prefetch" href="/easyweb/assets/js/40.45fac994.js"><link rel="prefetch" href="/easyweb/assets/js/41.61290db9.js"><link rel="prefetch" href="/easyweb/assets/js/42.356afa81.js"><link rel="prefetch" href="/easyweb/assets/js/43.ec760fe3.js"><link rel="prefetch" href="/easyweb/assets/js/44.c560ea5e.js"><link rel="prefetch" href="/easyweb/assets/js/45.0fc5cdb1.js"><link rel="prefetch" href="/easyweb/assets/js/46.a8ba7437.js"><link rel="prefetch" href="/easyweb/assets/js/47.aa8f6421.js"><link rel="prefetch" href="/easyweb/assets/js/48.cbf2801e.js"><link rel="prefetch" href="/easyweb/assets/js/49.eef14a87.js"><link rel="prefetch" href="/easyweb/assets/js/50.60f5ba8c.js"><link rel="prefetch" href="/easyweb/assets/js/51.2438728a.js"><link rel="prefetch" href="/easyweb/assets/js/52.6d974146.js"><link rel="prefetch" href="/easyweb/assets/js/53.d1911f3d.js"><link rel="prefetch" href="/easyweb/assets/js/54.e8012196.js"><link rel="prefetch" href="/easyweb/assets/js/55.f4abb04a.js"><link rel="prefetch" href="/easyweb/assets/js/56.b46d4e10.js"><link rel="prefetch" href="/easyweb/assets/js/57.4dcfe9db.js"><link rel="prefetch" href="/easyweb/assets/js/58.e9c36326.js"><link rel="prefetch" href="/easyweb/assets/js/59.4b10a1c8.js"><link rel="prefetch" href="/easyweb/assets/js/6.cdeb2b30.js"><link rel="prefetch" href="/easyweb/assets/js/60.b6abe2b1.js"><link rel="prefetch" href="/easyweb/assets/js/61.18058f87.js"><link rel="prefetch" href="/easyweb/assets/js/62.4d1cd241.js"><link rel="prefetch" href="/easyweb/assets/js/63.7ed7d2e2.js"><link rel="prefetch" href="/easyweb/assets/js/64.2a021f07.js"><link rel="prefetch" href="/easyweb/assets/js/65.e97061ab.js"><link rel="prefetch" href="/easyweb/assets/js/66.49e02b51.js"><link rel="prefetch" href="/easyweb/assets/js/67.4a5ef356.js"><link rel="prefetch" href="/easyweb/assets/js/68.aa7c2aca.js"><link rel="prefetch" href="/easyweb/assets/js/69.63b1ca41.js"><link rel="prefetch" href="/easyweb/assets/js/70.3582f33d.js"><link rel="prefetch" href="/easyweb/assets/js/71.00682102.js"><link rel="prefetch" href="/easyweb/assets/js/72.f21182c2.js"><link rel="prefetch" href="/easyweb/assets/js/73.3d8f8810.js"><link rel="prefetch" href="/easyweb/assets/js/74.6b129139.js"><link rel="prefetch" href="/easyweb/assets/js/75.9db17431.js"><link rel="prefetch" href="/easyweb/assets/js/76.a24ab56a.js"><link rel="prefetch" href="/easyweb/assets/js/77.b6e3901c.js"><link rel="prefetch" href="/easyweb/assets/js/78.a8b8d40f.js"><link rel="prefetch" href="/easyweb/assets/js/79.b0635d30.js"><link rel="prefetch" href="/easyweb/assets/js/80.9225d2a1.js"><link rel="prefetch" href="/easyweb/assets/js/81.b921abeb.js"><link rel="prefetch" href="/easyweb/assets/js/82.c87be1d5.js"><link rel="prefetch" href="/easyweb/assets/js/83.940a268c.js"><link rel="prefetch" href="/easyweb/assets/js/84.05e546bf.js"><link rel="prefetch" href="/easyweb/assets/js/85.84eb8435.js"><link rel="prefetch" href="/easyweb/assets/js/86.c976c555.js"><link rel="prefetch" href="/easyweb/assets/js/87.e30ad2f7.js"><link rel="prefetch" href="/easyweb/assets/js/88.dde419d4.js"><link rel="prefetch" href="/easyweb/assets/js/89.e8ca938d.js"><link rel="prefetch" href="/easyweb/assets/js/9.2e5a12bc.js"><link rel="prefetch" href="/easyweb/assets/js/90.b5508dd1.js"><link rel="prefetch" href="/easyweb/assets/js/91.7d33cd4f.js"><link rel="prefetch" href="/easyweb/assets/js/92.b2dd0780.js"><link rel="prefetch" href="/easyweb/assets/js/93.b5ff41a0.js"><link rel="prefetch" href="/easyweb/assets/js/94.ab24c112.js"><link rel="prefetch" href="/easyweb/assets/js/95.0f36d118.js"><link rel="prefetch" href="/easyweb/assets/js/96.57ef7ea2.js"><link rel="prefetch" href="/easyweb/assets/js/97.50ce3baf.js"><link rel="prefetch" href="/easyweb/assets/js/98.f63863d7.js"><link rel="prefetch" href="/easyweb/assets/js/99.8b8b7d99.js"><link rel="prefetch" href="/easyweb/assets/js/vendors~docsearch.3f80bb7f.js"><link rel="prefetch" href="/easyweb/assets/js/vendors~flowchart.4f56b28a.js"><link rel="prefetch" href="/easyweb/assets/js/vendors~notification.e09fda73.js">
    <link rel="stylesheet" href="/easyweb/assets/css/0.styles.7d14fee4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/easyweb/" class="home-link router-link-active"><img src="/easyweb/images/logo.png" alt="Easyweb" class="logo"> <span class="site-name can-hide">Easyweb</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/easyweb/zh/guide/" class="nav-link router-link-active">
  文档
</a></div><div class="nav-item"><a href="/easyweb/zh/question/" class="nav-link">
  常见问题
</a></div><div class="nav-item"><a href="http://192.168.3.35:8081" target="_blank" rel="noopener noreferrer" class="nav-link external">
  中台演示
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/easyweb/zh/project/" class="nav-link">
  产品中心
</a></div></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/easyweb/zh/guide/" class="nav-link router-link-active">
  文档
</a></div><div class="nav-item"><a href="/easyweb/zh/question/" class="nav-link">
  常见问题
</a></div><div class="nav-item"><a href="http://192.168.3.35:8081" target="_blank" rel="noopener noreferrer" class="nav-link external">
  中台演示
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/easyweb/zh/project/" class="nav-link">
  产品中心
</a></div></nav> <!----> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>文档</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/easyweb/zh/guide/" aria-current="page" class="sidebar-link">介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/#架构图" class="sidebar-link">架构图</a></li><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/#部署图" class="sidebar-link">部署图</a></li><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/#服务端口介绍" class="sidebar-link">服务端口介绍</a></li></ul></li><li><a href="/easyweb/zh/guide/getting-started.html" aria-current="page" class="active sidebar-link">快速上手</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/getting-started.html#注解说明" class="sidebar-link">注解说明</a></li><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/getting-started.html#开发规范" class="sidebar-link">开发规范</a></li></ul></li><li><a href="/easyweb/zh/guide/vue.html" class="sidebar-link">前端</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/vue.html#用qiankun来实现vue技术栈的前端微服务" class="sidebar-link">用qiankun来实现vue技术栈的前端微服务</a></li><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/vue.html#运行和打包" class="sidebar-link">运行和打包</a></li><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/vue.html#微前端的使用" class="sidebar-link">微前端的使用</a></li><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/vue.html#基座配置-主应用" class="sidebar-link">基座配置（主应用）</a></li><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/vue.html#子应用配置" class="sidebar-link">子应用配置</a></li><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/vue.html#新增子应用" class="sidebar-link">新增子应用</a></li><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/vue.html#代码规范" class="sidebar-link">代码规范</a></li><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/vue.html#_1、业务资源前后置事件" class="sidebar-link">1、业务资源前后置事件</a></li><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/vue.html#_2、业务资源自定义按钮事件" class="sidebar-link">2、业务资源自定义按钮事件</a></li><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/vue.html#_3、流程事件" class="sidebar-link">3、流程事件</a></li><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/vue.html#_4、自定义开发列表页面打开配置详情页面" class="sidebar-link">4、自定义开发列表页面打开配置详情页面</a></li><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/vue.html#_5、流程" class="sidebar-link">5、流程</a></li></ul></li><li><a href="/easyweb/zh/guide/java.html" class="sidebar-link">后端</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/java.html#_1、baseservice作用" class="sidebar-link">1、BaseService作用</a></li><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/java.html#_2、流程事件" class="sidebar-link">2、流程事件</a></li></ul></li><li><a href="/easyweb/zh/guide/engine.html" class="sidebar-link">工作流接口</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/engine.html#启动" class="sidebar-link">启动</a></li><li class="sidebar-sub-header"><a href="/easyweb/zh/guide/engine.html#办理" class="sidebar-link">办理</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>深入</span> <!----></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="快速上手"><a href="#快速上手" class="header-anchor">#</a> 快速上手</h1> <div class="custom-block warning"><p class="custom-block-title">前提条件</p> <p>新建项目前端均从中台组下载项目模板，项目模板包含登陆、首页、个人中心、菜单等基本框架功能。
并告知管理员新建租户，获取appId、cient_id、client_secret
项目模板地址：</p></div> <h2 id="注解说明"><a href="#注解说明" class="header-anchor">#</a> 注解说明</h2> <h3 id="enablecustomconfig"><a href="#enablecustomconfig" class="header-anchor">#</a> @EnableCustomConfig</h3> <p>服务启动类可以通过<code>@EnableCustomConfig</code>进行服务的初始化配置。该注解主要有以下几个作用：</p> <ol><li>MappScan扫描支持</li> <li>ComponentScan扫描支持</li></ol> <h3 id="loginuser"><a href="#loginuser" class="header-anchor">#</a> @LoginUser</h3> <p>在controller参数中通过<code>@LoginUser SysUser loginUser</code> 获取当前登录用户
<strong>示例</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/functions/manage&quot;</span><span class="token punctuation">,</span> produces <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;application/json; charset=utf-8&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span> <span class="token function">queryManageFunctions</span><span class="token punctuation">(</span><span class="token annotation punctuation">@LoginUser</span> <span class="token class-name">SysUser</span> loginUser<span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token comment">// ... </span>
       <span class="token punctuation">}</span>
</code></pre></div><h3 id="log-title-流程设计-businesstype-businesstype-insert"><a href="#log-title-流程设计-businesstype-businesstype-insert" class="header-anchor">#</a> @Log(title = &quot;流程设计&quot;, businessType = BusinessType.INSERT)</h3> <p>在controller方法上通过注解<code>@Log</code>实现操作日志收集(主要针对曾、删、改操作)
<strong>示例</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;流程定义保存&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Log</span><span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">&quot;流程设计&quot;</span><span class="token punctuation">,</span> businessType <span class="token operator">=</span> <span class="token class-name">BusinessType</span><span class="token punctuation">.</span>INSERT<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ResObject</span> <span class="token function">saveBpmDefinition</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Validated</span><span class="token punctuation">(</span><span class="token class-name">ValidType<span class="token punctuation">.</span>Default</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">BpmDefinitionDesignVO</span> vo<span class="token punctuation">)</span><span class="token punctuation">{</span>

       <span class="token punctuation">}</span>
</code></pre></div><h3 id="cacheable-加缓存注解"><a href="#cacheable-加缓存注解" class="header-anchor">#</a> @Cacheable 加缓存注解</h3> <p>@Cacheable(value = CacheConstants.WF_PRO_SET, key = CacheConstants.WF_PRO_SET + &quot;+'<em>'+#defId+'</em>'+#appId&quot;)</p> <h4 id="清除缓存注解-cacheevict"><a href="#清除缓存注解-cacheevict" class="header-anchor">#</a> 清除缓存注解@CacheEvict</h4> <p>@CacheEvict(value = CacheConstants.WF_PRO_SET, allEntries = true)</p> <div class="language- extra-class"><pre class="language-text"><code>@CacheEvict(value = CacheConstants.WF_PRO_SET, allEntries = true)
public void saveProcessTaskForm(SysUser user, BpmFormSetVO bpmFormSetVO) {

}
</code></pre></div><h3 id="datascope-service类上注解-实体类作为参数需要将实体类集成baseentity"><a href="#datascope-service类上注解-实体类作为参数需要将实体类集成baseentity" class="header-anchor">#</a> @DataScope service类上注解，实体类作为参数需要将实体类集成BaseEntity，</h3> <p>业务表需要存机构表UNIT_CODE_LINK字段数据（查询子级数据时需要），部门表ANCESTORS字段数据村上（查询子级部门数据时需要）
@DataScope(unitIdColumn=&quot;updator_unit&quot;,deptIdColumn=&quot;updator_dept&quot;,userIdColumn=&quot;creator_id&quot;)</p> <table><thead><tr><th>注解属性</th> <th>注释</th></tr></thead> <tbody><tr><td>unitIdColumn</td> <td>业务表对应机构id字段名(默认：unit_id)</td></tr> <tr><td>unitLinkColumn</td> <td>业务表对应机构link字段名（查本下级用）(默认：unit_link)</td></tr> <tr><td>deptIdColumn</td> <td>业务表对应部门id字段名(默认：dept_id)</td></tr> <tr><td>deptLinkColumn</td> <td>业务表对应部门link字段名（查本下级用）（默认：dept_link)</td></tr> <tr><td>userIdColumn</td> <td>业务表对应用户id字段名（默认：user_id)</td></tr> <tr><td>noColumn</td> <td>业务表不存在以上哪几个字段需要标明{&quot;column1&quot;,&quot;column2&quot;}</td></tr></tbody></table> <h3 id="valid"><a href="#valid" class="header-anchor">#</a> @Valid</h3> <p><code>@Valid</code>会对被标注的controller入参类进行参数校验</p> <p>被标注的类中有<code>@Length</code>注解标注的字段，则该字段不能超过指定长度</p> <p>被标注的类有<code>@NotBlank</code>注解标注的字段，则该字段不能为空</p> <p>更多参数校验注解请参考hibernate validator</p> <p>当校验条件不满足的时候，会进入统一异常处理，统一异常处理会给前端返回code为0，message为指定message的消息</p> <p><strong>示例</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Valid</span> <span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">DeptBasic</span> dept<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptBasic</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;部门名称不可为空&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> jgMc<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Length</span><span class="token punctuation">(</span>max <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> message <span class="token operator">=</span> <span class="token string">&quot;选用标志长度最大为1&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> xybs<span class="token punctuation">;</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="enablecustomswagger2"><a href="#enablecustomswagger2" class="header-anchor">#</a> @EnableCustomSwagger2</h3> <p><code>@EnableCustomSwagger2</code> 对在线api文档支持，/doc.html访问swagger加强</p> <p>为完善api接口管理文档，在类、方法上还需要加上@Api..注解完善信息</p> <p>controller类上必须加上<code>@Api(tags = &quot;标签&quot;)</code></p> <p>controller内的http请求方法必须加上<code>@ApiOperation(&quot;摘要&quot;)</code></p> <h3 id="api"><a href="#api" class="header-anchor">#</a> @Api</h3> <p><code>@Api</code>使用在类上，表明是swagger资源，@API拥有两个属性:value、tags.</p> <p>生成的api文档会根据tags分类,tags如果有多个值，会生成多个list，每个list都显示所有接口.</p> <p>value的作用类似tags,但是不能有多个值</p> <p><strong>示例</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">&quot;Api管理&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SysApiController</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="apioperation"><a href="#apioperation" class="header-anchor">#</a> @ApiOperation</h3> <p><code>@ApiOperation</code>使用于在方法上，表示一个http请求的操作. 常用属性：</p> <p>value用于方法描述</p> <p>notes用于提示内容</p> <p>tags可以重新分组</p> <p><strong>示例</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;汉字转拼音&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;汉字转拼音&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">AjaxResult</span> <span class="token function">getPinyin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="数据权限过滤"><a href="#数据权限过滤" class="header-anchor">#</a> 数据权限过滤</h3> <h4 id="数据权限有"><a href="#数据权限有" class="header-anchor">#</a> 数据权限有</h4> <p>本机构
本机构及以下
本部门
本部门及以下
本人
自定义权限（机构）</p> <h4 id="在service上添加注解-单表查询建议通过querywrapper对象设置查询条件"><a href="#在service上添加注解-单表查询建议通过querywrapper对象设置查询条件" class="header-anchor">#</a> 在service上添加注解 单表查询建议通过QueryWrapper对象设置查询条件</h4> <p>@DataScope(deptAlias = &quot;d&quot;,deptLinkColumn = &quot;ancestors&quot;,userIdColumn = &quot;create_by&quot;)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token annotation punctuation">@DataScope</span><span class="token punctuation">(</span>deptAlias <span class="token operator">=</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span>deptLinkColumn <span class="token operator">=</span> <span class="token string">&quot;ancestors&quot;</span><span class="token punctuation">,</span>userIdColumn <span class="token operator">=</span> <span class="token string">&quot;create_by&quot;</span><span class="token punctuation">)</span>
#### 字段别名：
##### 机构字段别名：unitAlias 部门字段别名：deptAlias 用户字段别名：userAlias
#### 字段名称：
##### 机构id字段：unitIdColumn 部门id字段：deptIdColunm 用户id字段：userIdColunm
#### 机构link字段：unitLink 部门link字段：deptLink
#### 没有的字段 noColunm 可多个<span class="token punctuation">{</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span> 一般当角色数据权限设置为“本部门或者本部门及以下”时，业务数据没有部门字段时则需要noColunm<span class="token operator">=</span><span class="token punctuation">{</span>“deptId”<span class="token punctuation">}</span>来说明不要过滤部门id
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SysDept</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectDeptList</span><span class="token punctuation">(</span><span class="token class-name">SysDept</span> dept<span class="token punctuation">,</span><span class="token class-name">QueryWrapper</span> queryWrapper<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>dept<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        queryWrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> dept<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    queryWrapper<span class="token punctuation">.</span><span class="token function">ne</span><span class="token punctuation">(</span><span class="token string">&quot;del_flag&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SysDept</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> deptMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> list<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="开发规范"><a href="#开发规范" class="header-anchor">#</a> 开发规范</h2> <h3 id="数据格式"><a href="#数据格式" class="header-anchor">#</a> 数据格式</h3> <h4 id="_1-写好代码注释-统一格式"><a href="#_1-写好代码注释-统一格式" class="header-anchor">#</a> 1.写好代码注释，统一格式</h4> <p>类注释：
/**</p> <ul><li>@author 作者</li> <li>@Description 描述</li> <li>@Date 日期（年月日时分秒）
*/</li></ul> <p>方法注释：</p> <p>/**</p> <ul><li>@param formId 参数1描述</li> <li>@param instId 参数2描述</li> <li>@param taskKey 参数3描述</li> <li>@return ResObject 返回描述
*/</li></ul> <h4 id="_2-返回格式统一-code-message-data"><a href="#_2-返回格式统一-code-message-data" class="header-anchor">#</a> 2.返回格式统一{&quot;code&quot;:&quot;&quot;,&quot;message&quot;:&quot;&quot;,&quot;data&quot;:&quot;&quot;}</h4> <table><thead><tr><th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>code</td> <td>200表示操作成功，500表示失败</td></tr> <tr><td>message</td> <td>提示信息</td></tr> <tr><td>data</td> <td>返回数据</td></tr></tbody></table> <h4 id="_3-做好异常处理"><a href="#_3-做好异常处理" class="header-anchor">#</a> 3.做好异常处理</h4> <p>所有接口都必须有异常抛出，在controller里捕获所有异常并做处理
<strong>示例</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/getData&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">,</span> produces <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;application/json; charset=utf-8&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;获取表单数据&quot;</span><span class="token punctuation">,</span> httpMethod <span class="token operator">=</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;获取表单数据&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ResObject</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token class-name">String</span> formId<span class="token punctuation">,</span><span class="token class-name">String</span> instId<span class="token punctuation">,</span><span class="token class-name">String</span> taskKey<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
        <span class="token class-name">List</span> result<span class="token operator">=</span>formDataService<span class="token punctuation">.</span><span class="token function">getDatas</span><span class="token punctuation">(</span>formId<span class="token punctuation">,</span>instId<span class="token punctuation">,</span>taskKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResObject</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token string">&quot;获取表单数据成功&quot;</span><span class="token punctuation">,</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">BusinessException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//业务异常捕获</span>
        log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResObject</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//程序异常捕获</span>
        log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;获取表单数据失败&quot;</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResObject</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token string">&quot;获取表单数据失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-请求路径规范"><a href="#_4-请求路径规范" class="header-anchor">#</a> 4.请求路径规范</h4> <p>常规请求统一路径：</p> <ul><li>分页列表请求 GET /modelName/list 示例：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>@GetMapping(&quot;list&quot;)
@ApiOperation(value = &quot;流程定义分页列表&quot;)
public ResObject list(@LoginUser SysUser sysUser, BpmDefinitionDesignVO vo) {

}
</code></pre></div><ul><li>详情请求 GET /modelName/{modelId} 示例：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>@GetMapping(value = {&quot;/&quot;, &quot;/{modelId}&quot;})
@ApiOperation(value = &quot;获取用户信息&quot;)
public ResObject getUser(@PathVariable(value = &quot;modelId&quot;, required = true) String modelId)) {

}
</code></pre></div><ul><li>保存请求 POST /modelName/ 示例：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>@PostMapping(&quot;&quot;)
@ApiOperation(value = &quot;流程定义保存&quot;)
@Log(title = &quot;流程设计&quot;, businessType = BusinessType.INSERT)
public ResObject saveBpmDefinition(@LoginUser SysUser sysUser, @Validated(ValidType.Default.class) @RequestBody BpmDefinitionDesignVO vo) {

}
</code></pre></div><ul><li>更新请求 PUT /modelName/ 示例：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>@PutMapping(&quot;&quot;)
@ApiOperation(value = &quot;流程定义更新&quot;)
@Log(title = &quot;流程设计&quot;, businessType = BusinessType.UPDATE)
public ResObject updateBpmDefinition(@LoginUser SysUser sysUser, @Validated(ValidType.Default.class) @RequestBody BpmDefinitionDesignVO vo) {

}
</code></pre></div><ul><li>删除请求 DELETE /modelName/ 示例：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>@DeleteMapping(&quot;&quot;)
@ApiOperation(value = &quot;流程定义删除&quot;)
@Log(title = &quot;流程设计&quot;, businessType = BusinessType.DELETE)
public ResObject deleteBpmDefinition(@LoginUser SysUser sysUser,BpmDefinitionDesignVO vo) {

}
</code></pre></div><h4 id="_5-feign"><a href="#_5-feign" class="header-anchor">#</a> 5.feign</h4> <p>以feign形式提供接口服务，接口地址统一“/api”开头</p> <h4 id="_6-mybatis-plus"><a href="#_6-mybatis-plus" class="header-anchor">#</a> 6.mybatis-plus</h4> <ul><li>mapper、dao 继承类BaseMapper，并在T实体类上添加@TableName、@TableId注解
<strong>示例</strong></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>easyweb<span class="token punctuation">.</span>common<span class="token punctuation">.</span>security<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">BaseEntity</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span><span class="token string">&quot;sys_unit&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SysUnit</span> <span class="token keyword">implements</span> <span class="token class-name">BaseEntity</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...实体类</span>
    <span class="token comment">/**
     * 机构主键
     */</span>
    <span class="token annotation punctuation">@TableId</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> unitId<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SysUnitMapper</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SysUnit</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// ...mapper || dao接口类 可以省略代码块及自动映射</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>sql中不允许出现 select * from table</li></ul> <h4 id="_7-版本管理提交格式"><a href="#_7-版本管理提交格式" class="header-anchor">#</a> 7.版本管理提交格式</h4> <p>1.git版本管理提交： add：新增XXX功能 fix：修复XXXbug || 完善XXX功能</p> <p>2.svn版本管理提交： 【提交人】XXX 【处理模块】工作流表单服务 【解决问题】新增添加表单保存接口</p> <h4 id="_8-代码生成"><a href="#_8-代码生成" class="header-anchor">#</a> 8.代码生成</h4> <p>地址：
http://192.168.6.116:8080
需要先设计数据库表，根据表结构生成controller\service\dao\entity\mapper.xml等相关代码文件</p> <h4 id="_9-license"><a href="#_9-license" class="header-anchor">#</a> 9.license</h4> <ul><li>license授权文件提供mac地址找管理员生成</li> <li>license存放位置
<ul><li>win：将license文件存放到应用所在的磁盘根路径/opt/license/文件夹下</li> <li>linux：将license文件存放到/opt/license/文件夹下</li></ul></li></ul> <h4 id="_10-三员分立"><a href="#_10-三员分立" class="header-anchor">#</a> 10.三员分立</h4> <p>密码加密方式采用国密3加密 超级管理员(一般不提供账号)：superadmin 管理员：admin
权限：系统管理：机构管理、部门管理、用户管理、资源管理、角色管理、岗位管理、行政区划（新增、查看） 审计员：aadmin 权限：日志管理（查看、导出、导入） 安全员：sadmin
权限：系统管理：机构管理、部门管理、用户管理、资源管理、角色管理、岗位管理、行政区划（修改、删除）</p> <h4 id="_11-推荐加密方法-国密加密"><a href="#_11-推荐加密方法-国密加密" class="header-anchor">#</a> 11.推荐加密方法：国密加密</h4> <ul><li>SM2  椭圆曲线（ECC）公钥加密算法 一般用于前后端加密传输</li> <li>SMS4 密码杂凑算法，不可逆 （看情况可增强规则AES+CBC） 工具类地址：https://download.csdn.net/download/u010715243/12376462
<ul><li>框架集成 (str：加解密字符串；key：秘钥空则默认；code：解密字符串编码，如UTF-8)</li> <li>加密：SMS4Util.encodeSMS4(str)/ SMS4Util.encodeSMS4(str,key)</li> <li>解密：SMS4Util.decodeSMS4toString(str,code)/SMS4Util.decodeSMS4toString(str,key,code)</li></ul></li> <li>SMS3 密码杂凑算法，不可逆 工具类地址：https://download.csdn.net/download/u010715243/12376455
框架集成 SM3Util.encodeSM3(str)</li></ul> <h4 id="_12-页面显示敏感信息需要脱敏处理"><a href="#_12-页面显示敏感信息需要脱敏处理" class="header-anchor">#</a> 12.页面显示敏感信息需要脱敏处理</h4> <p>对输出的数据进行脱敏处理后,向用户展示，脱敏范围应不少于 50%，常见用户隐私信息脱敏规则 如下:</p> <ul><li>中文姓名脱敏 李* 保留第一位，后面以替换；</li> <li>公民身份号码脱敏***********5762 保留后 4 位；</li> <li>固定电话脱敏 ****1234 保留后 4 位；</li> <li>手机号码脱敏 1*********34 保留第一位，后面保留2 位；</li> <li>地址脱敏 北京市海淀区**** 保留前 6 位；</li> <li>电子邮箱脱敏 g***@163.com ***@后面的部分；</li> <li>银行卡号脱敏 622260*********1234 保留前 6 位后 4位；</li> <li>公司开户银行联号脱敏12********* 保留前 2 位；</li> <li>时间类的处理，建议脱敏规则为：入参 yyyymmdd(没有下划线，中划线)****1234 保留后 4 位，可根据不同业务需求场景自行判断是否脱敏</li></ul> <h4 id="_13-短时间的权限控制-用户登录密码锁定"><a href="#_13-短时间的权限控制-用户登录密码锁定" class="header-anchor">#</a> 13.短时间的权限控制（用户登录密码锁定）</h4> <h4 id="_14-基础环境"><a href="#_14-基础环境" class="header-anchor">#</a> 14.基础环境</h4> <ul><li>redis  (所有服务)</li> <li>minio  (oss)</li> <li>Eureka、Nacos(注册中心)</li></ul> <h4 id="_15-依赖规范"><a href="#_15-依赖规范" class="header-anchor">#</a> 15.依赖规范</h4> <p>开发中如果需要用到现有环境中未引入的依赖时，需整理好对应jar的GAV参数以及用途，发服务负责人评审通过后，方可引入，禁止随意引入JAR包</p> <h4 id="_16-编码注意点"><a href="#_16-编码注意点" class="header-anchor">#</a> 16.编码注意点</h4> <ul><li>异常不要通过e.printStackTrace()，所有异常打印通过log.error(&quot;XXX&quot;,e);</li></ul> <h4 id="_17-idea工具设置-代码规约"><a href="#_17-idea工具设置-代码规约" class="header-anchor">#</a> 17.idea工具设置(代码规约)</h4> <ul><li><p>引入依赖时如图设置成9999
<img src="/easyweb/assets/img/import.a0aca161.png" alt="部署图"></p></li> <li><p>注释代码如图设置
<img src="/easyweb/assets/img/codeGeneration.6597febd.png" alt="部署图"></p></li> <li><p>内容换行统一格式+往前添加
<img src="/easyweb/assets/img/wrappingAndBraces.347b67f8.png" alt="部署图"></p></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/8/7 14:18:53</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/easyweb/zh/guide/" class="prev router-link-active">
        介绍
      </a></span> <span class="next"><a href="/easyweb/zh/guide/vue.html">
        前端
      </a>
      →
    </span></p></div> <div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/easyweb/assets/js/app.35a2d17f.js" defer></script><script src="/easyweb/assets/js/5.e4161a44.js" defer></script><script src="/easyweb/assets/js/7.a0b797f9.js" defer></script><script src="/easyweb/assets/js/8.9a193c71.js" defer></script>
  </body>
</html>
